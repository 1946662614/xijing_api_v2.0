"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[502],{17922:function(xe,L,r){r.r(L);var V=r(15009),E=r.n(V),$=r(97857),y=r.n($),z=r(99289),A=r.n(z),N=r(5574),p=r.n(N),D=r(41306),H=r(35312),Q=r(79090),X=r(51042),Y=r(87547),w=r(71255),k=r(17677),q=r(36223),ee=r(94149),C=r(3355),se=r(90930),re=r(34994),ne=r(5966),ae=r(25514),j=r(2453),c=r(71230),o=r(15746),B=r(4393),te=r(66476),P=r(96074),Z=r(71577),_e=r(36147),f=r(67294),e=r(85893),g=ae.Z.Paragraph,ue={width:"100%",textAlign:"center"},le={marginLeft:"30px"},ie=function(h){var M=h.type==="image/jpeg"||h.type==="image/png";M||j.ZP.error("\u4EC5\u5141\u8BB8\u4E0A\u4F20 JPG/PNG \u683C\u5F0F\u7684\u6587\u4EF6!");var s=h.size/1024/1024<5;return s||j.ZP.error("\u6587\u4EF6\u6700\u5927\u4E0A\u4F20\u5927\u5C0F\u4E3A 5MB!"),M&&s},oe=function(){var h=(0,f.useState)({}),M=p()(h,2),s=M[0],ce=M[1],ve=(0,f.useState)(!1),R=p()(ve,2),x=R[0],U=R[1],Ee=(0,f.useState)(!1),T=p()(Ee,2),fe=T[0],I=T[1],pe=(0,f.useState)(!1),F=p()(pe,2),Pe=F[0],O=F[1],me=(0,f.useState)(!1),W=p()(me,2),De=W[0],S=W[1],je=(0,f.useState)(),b=p()(je,2),he=b[0],J=b[1],G=(0,H.useModel)("@@initialState"),m=G.initialState,Me=G.setInitialState,d=(0,f.useRef)();(0,f.useEffect)(function(){try{var _;K(m==null||(_=m.loginUser)===null||_===void 0?void 0:_.id)}catch(a){console.log(a)}},[]);var K=function(){var _=A()(E()().mark(function a(t){return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,D.lt)({id:t}).then(function(l){l.data&&(Me(function(v){return y()(y()({},v),{},{loginUser:l.data})}),ce(l.data),J(l.data.userAvatar))}));case 1:case"end":return u.stop()}},a)}));return function(t){return _.apply(this,arguments)}}(),Oe=function(){var _=A()(E()().mark(function a(){var t,i,u,l;return E()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=d==null||(t=d.current)===null||t===void 0?void 0:t.getFieldValue("userPassword"),n.next=3,(0,D.E9)({userAccount:s==null?void 0:s.userAccount,userPassword:i});case 3:u=n.sent,u.code===0&&(O(!1),U(!0),d==null||(l=d.current)===null||l===void 0||l.resetFields());case 5:case"end":return n.stop()}},a)}));return function(){return _.apply(this,arguments)}}(),Ae=function(){var _=A()(E()().mark(function a(t,i){var u;return E()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,D.Zn)({id:t,userAvatar:i});case 2:u=v.sent,u.code!==0?j.ZP.success("\u66F4\u65B0\u7528\u6237\u5934\u50CF\u5931\u8D25"):K(t);case 4:case"end":return v.stop()}},a)}));return function(t,i){return _.apply(this,arguments)}}(),ge=function(a){if(a.file.status==="uploading"){S(!0);return}if(a.file.status==="done"&&a.file.response.code===0){var t;j.ZP.success("\u4E0A\u4F20\u6210\u529F");var i=m==null||(t=m.loginUser)===null||t===void 0?void 0:t.id,u=a.file.response.data.url;S(!1),J(u),Ae(i,u)}},Ce=(0,e.jsxs)("div",{children:[De?(0,e.jsx)(Q.Z,{}):(0,e.jsx)(X.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),Ze=function(){var _=A()(E()().mark(function a(){var t,i,u,l;return E()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=d==null||(t=d.current)===null||t===void 0?void 0:t.getFieldValue("userPassword"),n.next=4,(0,D.E9)({userAccount:s==null?void 0:s.userAccount,userPassword:i});case 4:if(u=n.sent,u.code!==0){n.next=10;break}return n.next=8,(0,D.Zr)({id:s==null?void 0:s.id});case 8:l=n.sent,l.data&&(K(s==null?void 0:s.id),j.ZP.success("\u91CD\u7F6E\u6210\u529F\uFF01"),O(!1));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:case"end":return n.stop()}},a,null,[[0,12]])}));return function(){return _.apply(this,arguments)}}();return(0,e.jsxs)(se._z,{children:[(0,e.jsxs)(c.Z,{gutter:24,children:[(0,e.jsx)(o.Z,{span:8,children:(0,e.jsxs)(B.Z,{title:"\u4E2A\u4EBA\u4FE1\u606F",bordered:!1,children:[(0,e.jsx)(c.Z,{children:(0,e.jsx)(o.Z,{style:ue,children:(0,e.jsx)(te.Z,{name:"file",listType:"picture-circle",showUploadList:!1,action:"http://124.70.63.241:8101/api/file/upload",beforeUpload:ie,onChange:ge,children:he?(0,e.jsx)("img",{src:s==null?void 0:s.userAvatar,alt:"avatar",style:{width:"100%",borderRadius:"50%"}}):Ce})})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(Y.Z,{})," \u7528\u6237\u540D\u79F0\uFF1A",s==null?void 0:s.userName]})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(w.Z,{})," \u7528\u6237\u8D26\u53F7\uFF1A",s==null?void 0:s.userAccount]})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(k.Z,{})," \u7528\u6237\u89D2\u8272\uFF1A",s==null?void 0:s.userRole]})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(q.Z,{})," \u6CE8\u518C\u65F6\u95F4\uFF1A",s==null?void 0:s.createTime]})})]})}),(0,e.jsx)(o.Z,{span:16,children:(0,e.jsxs)(B.Z,{title:"\u79D8\u94A5\u64CD\u4F5C",bordered:!1,children:[(0,e.jsx)(c.Z,{children:(0,e.jsx)(o.Z,{children:x?(0,e.jsxs)(g,{copyable:{text:s==null?void 0:s.accessKey},children:[(0,e.jsx)(ee.Z,{})," accessKey\uFF1A",s==null?void 0:s.accessKey]}):(0,e.jsxs)(g,{children:[(0,e.jsx)(C.Z,{})," secretKey\uFF1A*********"]})})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsx)(o.Z,{children:x?(0,e.jsxs)(g,{copyable:{text:s==null?void 0:s.secretKey},children:[(0,e.jsx)(C.Z,{})," secretKey\uFF1A",s==null?void 0:s.secretKey]}):(0,e.jsxs)(g,{children:[(0,e.jsx)(C.Z,{})," secretKey\uFF1A*********"]})})}),(0,e.jsx)(P.Z,{}),(0,e.jsx)(c.Z,{children:(0,e.jsxs)(o.Z,{children:[x?(0,e.jsx)(Z.ZP,{type:"primary",onClick:function(){return U(!1)},children:"\u9690\u85CF\u79D8\u94A5"}):(0,e.jsx)(Z.ZP,{type:"primary",onClick:function(){O(!0),I(!0)},children:"\u67E5\u770B\u79D8\u94A5"}),(0,e.jsx)(Z.ZP,{style:le,onClick:function(){O(!0),I(!1)},type:"primary",danger:!0,children:"\u91CD\u7F6E\u79D8\u94A5"})]})})]})})]}),(0,e.jsx)(_e.Z,{title:"\u67E5\u770B\u79D8\u94A5",open:Pe,onOk:fe?Oe:Ze,onCancel:function(){return O(!1)},children:(0,e.jsx)(re.A,{formRef:d,formKey:"check-user-password-form",autoFocusFirstInput:!0,submitter:{resetButtonProps:{style:{display:"none"}},submitButtonProps:{style:{display:"none"}}},children:(0,e.jsx)(ne.Z.Password,{name:"userPassword",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801"})})})]})};L.default=oe}}]);
